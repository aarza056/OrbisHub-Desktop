<!-- OrbisAgent UI Components -->
<!-- Modal dialogs and UI elements for agent management -->
<!-- Author: OrbisHub Team -->
<!-- Created: 2025-11-25 -->

<!-- Agent Details Modal -->
<dialog id="agentDetailsModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2>Agent Details</h2>
            <button class="modal-close" onclick="document.getElementById('agentDetailsModal').close()">&times;</button>
        </div>
        <div class="modal-body">
            <!-- Agent Info -->
            <div class="agent-details-grid">
                <div class="agent-detail-item">
                    <div class="agent-detail-item__label">Machine Name</div>
                    <div class="agent-detail-item__value" id="agentDetailName">‚Äî</div>
                </div>
                <div class="agent-detail-item">
                    <div class="agent-detail-item__label">Operating System</div>
                    <div class="agent-detail-item__value" id="agentDetailOS">‚Äî</div>
                </div>
                <div class="agent-detail-item">
                    <div class="agent-detail-item__label">IP Address</div>
                    <div class="agent-detail-item__value agent-detail-item__value--mono" id="agentDetailIP">‚Äî</div>
                </div>
                <div class="agent-detail-item">
                    <div class="agent-detail-item__label">Status</div>
                    <div class="agent-detail-item__value" id="agentDetailStatus">‚Äî</div>
                </div>
                <div class="agent-detail-item">
                    <div class="agent-detail-item__label">Version</div>
                    <div class="agent-detail-item__value" id="agentDetailVersion">‚Äî</div>
                </div>
                <div class="agent-detail-item">
                    <div class="agent-detail-item__label">Last Seen</div>
                    <div class="agent-detail-item__value" id="agentDetailLastSeen">‚Äî</div>
                </div>
            </div>
            
            <!-- Tab Navigation -->
            <div class="agent-tabs">
                <button class="agent-tab agent-tab--active" onclick="AgentUI.switchTab('jobs')">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10"></circle>
                        <polyline points="12 6 12 12 16 14"></polyline>
                    </svg>
                    Recent Jobs
                </button>
                <button class="agent-tab" onclick="AgentUI.switchTab('builds')">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="2" y="7" width="20" height="14" rx="2" ry="2"></rect>
                        <path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"></path>
                    </svg>
                    Build History
                </button>
            </div>
            
            <!-- Tab Content -->
            <div class="agent-tab-content">
                <!-- Recent Jobs Tab -->
                <div id="agentTabJobs" class="agent-tab-panel agent-tab-panel--active">
                    <div id="agentDetailJobs" class="agent-jobs-list">
                        <p class="muted" style="text-align:center; padding:20px;">Loading...</p>
                    </div>
                </div>
                
                <!-- Build History Tab -->
                <div id="agentTabBuilds" class="agent-tab-panel">
                    <div id="agentDetailBuilds" class="agent-builds-list">
                        <p class="muted" style="text-align:center; padding:20px;">Loading...</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn btn-ghost" onclick="document.getElementById('agentDetailsModal').close()">Close</button>
        </div>
    </div>
</dialog>

<!-- Run Job Modal -->
<dialog id="runJobModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2>Run Job on Agent</h2>
            <button class="modal-close" onclick="document.getElementById('runJobModal').close()">&times;</button>
        </div>
        <div class="modal-body">
            <p style="margin-bottom:20px; color:var(--muted);">
                Execute a script or command on agent: <strong id="runJobAgentName" style="color:var(--text);">‚Äî</strong>
            </p>
            
            <div>
                <label for="jobType">Job Type</label>
                <select id="jobType">
                    <option value="PowerShell">PowerShell Script</option>
                    <option value="RunScript">Run Script (PS/CMD)</option>
                    <option value="GetSystemInfo">Get System Info</option>
                    <option value="GetProcessList">Get Process List</option>
                </select>
            </div>
            
            <div>
                <label for="jobScript">Script / Command</label>
                <textarea id="jobScript" rows="10" placeholder="Enter PowerShell script or command here...&#10;&#10;Example:&#10;Get-Process | Where-Object {$_.CPU -gt 100}"></textarea>
            </div>
            
            <div class="modal-info-box">
                <strong>üí° Tip:</strong> Scripts execute in PowerShell context on the remote machine. Ensure proper syntax and permissions.
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn btn-ghost" onclick="document.getElementById('runJobModal').close()">Cancel</button>
            <button class="btn" onclick="AgentUI.submitJob()" style="background:linear-gradient(135deg, #10b981 0%, #059669 100%); color:white; border:none;">
                <span>‚ñ∂</span> Submit Job
            </button>
        </div>
    </div>
</dialog>

<!-- Agent Deployment Guide Modal -->
<dialog id="agentDeploymentModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2>üöÄ OrbisAgent Deployment Guide</h2>
            <button class="modal-close" onclick="document.getElementById('agentDeploymentModal').close()">&times;</button>
        </div>
        <div class="modal-body">
            <div>
                <h3>Quick Start</h3>
                <p style="color:var(--muted); margin-bottom:20px;">Deploy OrbisAgent to your remote Windows machines in 3 simple steps:</p>
                
                <div class="deployment-steps">
                    <div class="deployment-step">
                        <div class="deployment-step__number deployment-step__number--1">1</div>
                        <div class="deployment-step__content">
                            <h4 class="deployment-step__title">Download Agent Script</h4>
                            <p class="deployment-step__description">Copy the PowerShell agent script to your target machine.</p>
                            <div class="code-block-wrapper">
                                <code>Functions/OrbisAgent/agent-client.ps1</code>
                                <button class="code-copy-btn" onclick="navigator.clipboard.writeText('Functions/OrbisAgent/agent-client.ps1'); this.textContent='Copied!'; setTimeout(()=>this.textContent='Copy', 2000)">Copy</button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="deployment-step">
                        <div class="deployment-step__number deployment-step__number--2">2</div>
                        <div class="deployment-step__content">
                            <h4 class="deployment-step__title">Run Agent</h4>
                            <p class="deployment-step__description">Execute with your OrbisHub server URL (replace with your actual server address).</p>
                            <div class="code-block-wrapper">
                                <code>.\\agent-client.ps1 -HubUrl "http://your-hub-server:3000"</code>
                                <button class="code-copy-btn" onclick="navigator.clipboard.writeText('.\\\\agent-client.ps1 -HubUrl &quot;http://your-hub-server:3000&quot;'); this.textContent='Copied!'; setTimeout(()=>this.textContent='Copy', 2000)">Copy</button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="deployment-step">
                        <div class="deployment-step__number deployment-step__number--3">3</div>
                        <div class="deployment-step__content">
                            <h4 class="deployment-step__title">Verify Connection</h4>
                            <p class="deployment-step__description">Agent should appear in this dashboard within 30 seconds.</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <div>
                <h3>Optional Parameters</h3>
                <table>
                    <thead>
                        <tr>
                            <th>Parameter</th>
                            <th>Description</th>
                            <th>Default</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>-AgentId</td>
                            <td style="color:var(--muted);">Unique identifier for this agent</td>
                            <td>Computer name</td>
                        </tr>
                        <tr>
                            <td>-PollInterval</td>
                            <td style="color:var(--muted);">Seconds between job polls</td>
                            <td>30</td>
                        </tr>
                        <tr>
                            <td>-MetricsInterval</td>
                            <td style="color:var(--muted);">Seconds between metric reports</td>
                            <td>60</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            
            <div class="security-warning">
                <div class="security-warning__header">
                    <span class="security-warning__icon">‚ö†Ô∏è</span>
                    <strong class="security-warning__title">Security Note</strong>
                </div>
                <p class="security-warning__text">This initial implementation is designed for trusted internal networks. For production use, implement API key authentication, HTTPS encryption, and script validation.</p>
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn" onclick="document.getElementById('agentDeploymentModal').close()" style="background:linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%); color:white; border:none;">
                <span>‚úì</span> Got It
            </button>
        </div>
    </div>
</dialog>
